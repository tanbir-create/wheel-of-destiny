<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0  maximum-scale=1"
    />
    <title>Document</title>
    <style>
      #canvas {
        transition: 5s ease;
        border-radius: 50%;
        transform: rotate(-90deg);

        z-index: -1;
      }
    </style>
    <link rel="preload" href="style.css" as="style" />
    <link rel="stylesheet" href="style.css" />
    <script defer src="script2.js"></script>
  </head>

  <body>
    <audio src="images/23.mp3" id="audio"></audio>
    <div id="app-container">
      <div id="rules-div">
        <div id="rules-opener">
          <p>Rules</p>
        </div>
        <svg
          version="1.0"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 1441.000000 214.000000"
          preserveAspectRatio="xMidYMid meet"
        >
          <filter id="inset-shadow">
            <!-- Shadow offset -->
            <feOffset dx="0" dy="0" />
            <!-- Shadow blur -->
            <feGaussianBlur stdDeviation="10" result="offset-blur" />
            <!-- Invert drop shadow to make an inset shadow-->
            <feComposite
              operator="out"
              in="SourceGraphic"
              in2="offset-blur"
              result="inverse"
            />
            <!-- Cut colour inside shadow -->
            <feFlood flood-color="black" flood-opacity=".95" result="color" />
            <feComposite
              operator="in"
              in="color"
              in2="inverse"
              result="shadow"
            />
            <!-- Placing shadow over element -->
            <feComposite operator="over" in="shadow" in2="SourceGraphic" />
          </filter>

          <g
            transform="translate(0.000000,214.000000) scale(0.100000,-0.100000)"
            fill="#840FD8"
            stroke="none"
          >
            <path
              d="M0 1800 l0 -340 2298 -3 c2125 -2 2302 -4 2367 -20 245 -59 429 -156
       633 -330 44 -38 198 -190 342 -338 144 -148 305 -306 358 -350 251 -209 498
       -329 804 -391 102 -21 140 -23 388 -23 260 1 282 2 401 27 291 63 526 176 768
       370 42 34 222 208 401 388 353 355 451 438 627 528 56 29 142 65 192 82 193
       63 73 60 2565 60 l2266 0 0 340 0 340 -7205 0 -7205 0 0 -340z"
            />
          </g>
        </svg>
      </div>

      <div id="sp1">
        <div class="stage_highlight"></div>

        <div class="spotlight_swivel">
          <div class="lamp"></div>

          <div class="spotlight"></div>
        </div>
      </div>

      <div id="sp2">
        <div class="stage_highlight"></div>

        <div class="spotlight_swivel">
          <div class="lamp"></div>

          <div class="spotlight"></div>
        </div>
      </div>

      <button id="back-btn">
        <img src="images/back-btn.png" alt="" />
      </button>

      <button id="music-btn">
        <img src="images/music-btn.png" alt="" />
      </button>

      <div id="heading"><img src="images/headingAsset 4@4x.png" alt="" /></div>
      <div id="wrapper0">
        <div id="wrapper1">
          <div id="wrapper2">
            <div id="wrapper3">
              <div id="wrapper4">
                <span style="--i: 0.5"><div class="b"></div></span
                ><span style="--i: 1.5"><div class="b"></div></span
                ><span style="--i: 2.5"><div class="b"></div></span
                ><span style="--i: 3.5"><div class="b"></div></span
                ><span style="--i: 4.5"><div class="b"></div></span
                ><span style="--i: 5.5"><div class="b"></div></span
                ><span style="--i: 6.5"><div class="b"></div></span
                ><span style="--i: 7.5"><div class="b"></div></span>
                <div id="wrapper5">
                  <div id="wheelOfFortune">
                    <canvas id="canvas"></canvas>
                    <div id="inner-shadow"></div>
                    <div id="spin-wrapper">
                      <div id="spin"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="start-btn-container">
        <button id="start">WIN NOW</button>
      </div>

      <div id="leave-div" class="overlay">
        <div class="overlay-content overlay-content2">
          <div id="emoji">
            <img src="images/guruji.png" alt="" />
          </div>

          <h2>Sure you want to leave?</h2>
          <p id="try-now">
            10000+ clients have claimed the reward. Claim Upto MAXIMUM 100 GEMS
            <br />
            <button id="try-now-btn">Try now</button>
          </p>
          <button id="claim-now">CLAIM NOW</button>
        </div>

        <button class="close-btn" onclick="goBack()">
          <img src="images/icon-close-popup.png" alt="" />
        </button>
      </div>
    </div>
  </body>
</html>

<!-- <script>
     

      //const WHEEL_PRIZE_LIST_API = "https://api.guruji.app/solar/wheel/wheel_prize_list?user_id=5&rand_num=7"
     

      //cant fetch because  Access-Control-Allow-Origin is not sent 
      // document.addEventListener("DOMContentLoaded", function () {
      //   fetch("https://api.guruji.app/solar/wheel/wheel_prize_list?user_id=5&rand_num=7",{mode: 'no-cors'}).then(response => response.json()).then(resss=>console.log(resss)).catch(err => console.log(err))
      // });
      
      const sectors = [
        { color: "#f82", label: "Stack" },
        { color: "#0bf", label: "10" },
        { color: "#fb0", label: "200" },
        { color: "#0fb", label: "50" },
      ];

      const rand = (m, M) => Math.floor(Math.random() * (M - m) + m);
      const tot = sectors.length;
      const EL_spin = document.querySelector("#spin");
      const ctx = document.querySelector("#wheel").getContext("2d");
      const dia = ctx.canvas.width;
      const rad = dia / 2;
      const PI = Math.PI;
      const TAU = 2 * PI;
      const arc = TAU / sectors.length;

      const friction = 0.991; // 0.995=soft, 0.99=mid, 0.98=hard
      let angVel = 0; // Angular velocity
      let ang = 0; // Angle in radians

      const getIndex = () => Math.floor(tot - (ang / TAU) * tot) % tot;

      function drawSector(sector, i) {
        const ang = arc * i;
        ctx.save();
        // COLOR
        console.log(rad)
        ctx.beginPath();
        ctx.fillStyle = sector.color;
        ctx.moveTo(rad, rad);
        ctx.arc(rad, rad, rad, ang, ang + arc);
        ctx.lineTo(rad, rad);
        ctx.fill();
        // TEXT
        console.log("arc:" + arc)
        ctx.translate(rad, rad);
        // ctx.rotate(Math.PI*2/(i*sectors.length));
        ctx.rotate(ang + arc/2);
        ctx.textAlign = "center";
        ctx.fillStyle = "#fff";
        ctx.font = "bold 16px sans-serif";
        ctx.fillText(sector.label, rad - 50, 10);
        // ctx.translate(10, 10);

        //
        ctx.restore();
      }

      function rotate() {
        const sector = sectors[getIndex()];
        ctx.canvas.style.transform = `rotate(${ang - PI / 2}rad)`;
        EL_spin.textContent = !angVel ? "SPIN" : sector.label;
        EL_spin.style.background = "black";
      }
      function frame() {
        if (!angVel) return;
        angVel *= friction; // Decrement velocity by friction
        if (angVel < 0.002) angVel = 0; // Bring to stop
        ang += angVel; // Update angle
        ang %= TAU; // Normalize angle
        rotate();
      }

      function engine() {
        frame();
        requestAnimationFrame(engine);
      }

      // INIT
      sectors.forEach(drawSector);
      rotate(); // Initial rotation
      engine(); // Start engine
      EL_spin.addEventListener("click", () => {
        if (!angVel) angVel = rand(25, 35);
      });
    </script> -->
